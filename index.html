<!DOCTYPE html>
<html>
    <head>
        <title>Rock Paper Scissors</title>
        <button id="rock">Rock</button> 
        <button id="paper">Paper</button> 
        <button id="scissors">Scissors</button>
        <div id="container"></div>
    </head>
    <body>
        <script>
            const roundResults = document.createElement('div');
            roundResults.classList.add('roundResults');
            const finalScore = document.createElement('div');
            finalScore.classList.add('finalScore');
            const finalResult = document.createElement('div');
            finalResult.classList.add('finalResult');

            const rock = document.querySelector("#rock");
            const paper = document.querySelector("#paper");
            const scissors = document.querySelector("#scissors");
            let playerSelection;

            rock.addEventListener('click', () => {
                game("rock");
            });
            paper.addEventListener('click', () => {
                game("paper");
            });
            scissors.addEventListener('click', () => {
                game("scissors");
            });

            function computerPlay() {
                let computerSelection = "rock";
                num = Math.floor(Math.random() * 3)
                if (num === 1) {
                    computerSelection = "paper";
                } else if (num === 2) {
                    computerSelection = "scissors";
                }
                return computerSelection;
            }

            function playRound(playerSelection, computerSelection) {
                playerSelection = playerSelection.toLowerCase();
                console.log(playerSelection);
                if (playerSelection === computerSelection) {
                    return "t";
                } else if (playerSelection === "rock" && computerSelection === "scissors") {
                    return "w";
                } else if (playerSelection === "paper" && computerSelection === "rock") {
                    return "w";
                } else if (playerSelection === "scissors" && computerSelection === "paper") {
                    return "w";
                } else if (playerSelection === "scissors" && computerSelection === "rock") {
                    return "l";
                } else if (playerSelection === "rock" && computerSelection === "paper") {
                    return "l";    
                } else if (playerSelection === "paper" && computerSelection === "scissors") {
                    return "l";
                }
            }
            
            function displayRoundStatus(roundStatus, playerSelection, computerSelection, playerScore, computerScore) {
                

                    if (roundStatus === "w") {
                        playerScore++;
                        roundResults.append("You won this round: " + playerSelection + 
                                " beats " + computerSelection + "!");
                    } else if (roundStatus === "l") {
                        computerScore++;
                        roundResults.append("You lost this round: " + computerSelection +
                                " beats " + playerSelection + "!");
                    } else if (roundStatus === "t") {
                        roundResults.append("You tied this round: " + playerSelection +
                                " and " + computerSelection + " are equal!");
                    }
                    
                    console.log(playerScore);
                    console.log(computerScore);
                    
                    roundResults.append("Current score: Player " + playerScore + ", Computer " +
                            computerScore + "!");

                    container.appendChild(roundResults);

                }

            function game(playerSelection) {
                let playerScore = 0;
                let computerScore = 0;
                //let roundStatus;                       

                //while (playerScore < 5 && computerScore < 5) {
                    
                    let computerSelection = computerPlay();
            
                    
                //}
                let roundStatus = playRound(playerSelection, computerSelection);
                displayRoundStatus(roundStatus, playerSelection, computerSelection, playerScore, computerScore);

                displayFinalScore(playerScore, computerScore)
            }
            
            function displayFinalScore(playerScore, computerScore) {
                finalScore.textContent = "Final score: Player " + playerScore + ", Computer " +
                            computerScore + "!";
                container.appendChild(finalScore);

                if (playerScore > computerScore) {
                    finalResult.textContent = "You won!";
                } else if (computerScore > playerScore) {
                    finalResult.textContent = "You lost!";
                } else {
                    finalResult.textContent = "It\'s a tie!";
                }
                container.appendChild(finalResult);

            }
            </script>
    </body>
</html>