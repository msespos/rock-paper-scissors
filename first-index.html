<!DOCTYPE html>
<html>
    <head>
        <title>Rock Paper Scissors</title>
    </head>
    <body>
        <script>
            function computerPlay() {
                let move = "rock";
                num = Math.floor(Math.random() * 3)
                if (num === 1) {
                    move = "paper";
                } else if (num === 2) {
                    move = "scissors";
                }
                return move;
            }
            function playRound(playerSelection, computerSelection) {
                let gameStatus;
	            playerSelection = playerSelection.toLowerCase();
                console.log(playerSelection);
                console.log(computerSelection);
                if (playerSelection === computerSelection) {
                    gameStatus = "t";
                } else if (playerSelection === "rock" && computerSelection === "scissors") {
                        gameStatus = "w";
                } else if (playerSelection === "paper" && computerSelection === "rock") {
                        gameStatusus = "w";
                } else if (playerSelection === "scissors" && computerSelection === "paper") {
                        gameStatus = "w";
                } else if (playerSelection === "scissors" && computerSelection === "rock") {
                        gameStatus = "l";
                } else if (playerSelection === "rock" && computerSelection === "paper") {
                        gameStatus = "l";    
                } else if (playerSelection === "paper" && computerSelection === "scissors") {
                        gameStatus = "l";
                }
                return gameStatus;
            }
            function game() {
                let playerScore = 0;
                let computerScore = 0;
                let gameStatus;
                for (let turn = 0; turn < 5; turn++) {    
                    let playerSelection = window.prompt("Enter one: Rock, Paper or Scissors!");
                    playerSelection = playerSelection.toLowerCase();
                    while (playerSelection !== "rock" && playerSelection !== "paper" && playerSelection !== "scissors") {
                        console.log("Invalid selection. Please try again.");
                        playerSelection = window.prompt("Enter one: Rock, Paper or Scissors!");
                        playerSelection = playerSelection.toLowerCase();
                    }
                    let computerSelection = computerPlay()
                    gameStatus = playRound(playerSelection, computerSelection);
                    if (gameStatus === "w") {
                        playerScore++;
                        console.log("You won this round: " + playerSelection + " beats " + computerSelection + "!")
                    } else if (gameStatus === "l") {
                        computerScore++;
                        console.log("You lost this round: " + computerSelection + " beats " + playerSelection + "!")
                    } else if (gameStatus === "t") {
                        console.log("You tied this round!")
                    }
                    console.log("Score after Round "+ (turn + 1) + ": " + "Player " + playerScore + ", Computer " + computerScore + "!")
                }
                console.log("Final score: Player " + playerScore + ", Computer " + computerScore + "!")
                if (playerScore > computerScore) {
                    console.log("You won!")
                } else if (computerScore > playerScore) {
                    console.log("You lost!")
                } else {
                    console.log("It's a tie!")
                }
            }
            game();
            </script>
    </body>
</html>